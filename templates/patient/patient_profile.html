{% extends "base/client/base.html" %}
{% load static %} 
{% load widget_tweaks %}
{% block head %}
<style>
    .input-div + .input-div {
        margin-top: 16px;
    }
      .flex{
          /* margin-left:-8px ; */
        display: flex;
        flex-wrap: wrap;
        /* justify-content: space-between; */
        align-items: center;
      }
      .flex + .flex {
          margin-top: 1rem;
      }
      .container{
          /* padding: 1rem; */
      }
      
      .center-div{
        margin: 0 auto !important;
        /* width: 500px;
        max-width: 700px; */
        padding: 2rem 11rem;
      }

      .patient-profile-container{
          /* padding: 4em 0; */
        /* margin: 1rem auto; */
        border-radius: 8px;
        /* box-shadow: rgba(0, 0, 0, 0.16) 0px 10px 36px 0px, rgba(0, 0, 0, 0.06) 0px 0px 0px 1px; */
        /* padding: 2rem 11rem; */
      }
      
      #id_gender {
        width: auto !important;
        height: auto !important;
      }
      #id_gender .form-control{
        width: auto !important;
      }
      #id_gender .form-control{
        background-color: red;
      }
      textarea{
        resize: none;
        width: auto;
      }
      .input-div label{
        margin-top: 1rem;
        margin-left: 1rem;
      }
      .underline-link{
        text-decoration: underline;
        color: #4E944F;
        /* font-size: large; */
        font-weight: bold;
      }
      #id_gender{
        display: flex;
        justify-content: flex-start;
        align-items: center;
      }
      
      .previous-appointment-link-div a{
          color: green;
          /* text-decoration: underline; */
          padding: 0.5rem 1rem;
          border-radius: 4px;
          border: 1px solid green;

      }
        .previous-appointment-link-div a:hover{
            color: white;
            background-color: green;

        }
        .welcome-title-p {
            font-size: 2rem;}

            .button{
          background-color: #1da1f2;
            color: white;
            border: none;
            border-radius: 4px;
            /* padding: 1rem 6rem; */
            font-size: 1.5rem;
            cursor: pointer;
            width: 100%;
            padding: 1rem 0;
      }
      .button:hover{
          background-color: #325c76;
            color: white;
      }

      .breadcumb-title-div{
        background-color: #eef2f695 !important;
        padding: 2rem 11rem;
    }
    .breadcumb-title-div h2{
        /* font-size: 4rem; */
        color: rgb(17, 19, 35);
    }
    .breadcrumb{
        background-color: transparent;
        font-size: 1.5rem;
        padding:8px 0 !important;
    }
    .breadcrumb a{
        /* color: #fff; */
    }
    .breadcrumb > .active{
        color: gray;
    }
    
    .flex-col{
        display: flex;
        flex-direction: column;
        justify-content: center;
        /* align-items: center; */
    }
    .patient-profile-img{
        width: 50%;
        height: auto; 
    }
    .col-img{
      display: flex;
      justify-content: center;
    }
    .previous-appointment-link-div{
          margin-top:4rem;
          /* margin-left: 1rem; */
          /* margin-bottom: 2rem; */
      }
      .previous-appointment-link-div a{
          color: #1da1f2;
          /* text-decoration: underline; */
          padding: 1rem 2rem;
          border-radius: 4px;
          border: 1px solid #1da1f2;

      }
        .previous-appointment-link-div a:hover{
            color: white;
            background-color: #1da1f2;

        }
        .mt-4{
            margin-top: 1rem;
        }
        .mt-8{
            margin-top: 2rem;
        }
        .patient-profile-container .message-textarea{
            resize: none;
            width: 50%;
        }
        #id_gender label{
          font-weight: normal;
        }
        #id_gender input[type="radio"]{
          margin-left: 1rem;
        }
</style>
{% endblock %}
{% block content %}
<div class="patient-profile-container">
  <div class="breadcumb-title-div">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="/">Home</a></li>
          <li class="breadcrumb-item"><a href="{% url 'patient:appointment-home' %}">Appointments</a></li>
          <li class="breadcrumb-item"><a href="{% url 'patient:check-available-slots' %}">Check available slots</a></li>
          <li class="breadcrumb-item"><a href="{% url 'patient:get-otp' %}">Get OTP</a></li>
          <li class="breadcrumb-item"><a href="{% url 'patient:verify-otp' %}">Verify OTP</a></li>
          <li class="breadcrumb-item active" aria-current="page">Patient Details</li>
        </ol>
      </nav>
      <h2>
          <strong>Patient Details</strong>
      </h2>
</div>
    <div class="row center-div">
      <ul class="messages wow fadeInUp">
        {% for message in messages %}
        <li {% if message.tags %} class="{{ message.tags }}"{% endif %}>
            {% if message.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %}
            {{ message }}
            {% endif %}
            {% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}
            {{ message }}
            {% endif %}
        </li>
        {% endfor %}
    </ul>
{% if verify_otp_form.errors %}
    {% for field in verify_otp_form %}
        {% for error in field.errors %}
            <div class="alert alert-danger">
                <strong>{{ error|escape }}</strong>
            </div>
        {% endfor %}
    {% endfor %}

{% for error in verify_otp_form.non_field_errors %}
    <div class="alert alert-danger">
        <strong>{{ error|escape }}</strong>
    </div>
{% endfor %}

{% endif %}
      <div class="row">
        <div class="col-md-6 col-img">
            <img src="{% static 'img/clinic/undraw_profile_details_re_ch9r.svg' %}" class="img-responsive patient-profile-img" alt="contact us" />  
          </div>
        <div class="col-md-6">
          
          <div class="section-title wow fadeInUp" data-wow-delay="0.4s">
            <h2>Enter your details</h2>
            {% if response_messages.existing_patient %}
            <p class="text-bold welcome-title-p">
               Welcome back <strong>{{ response_messages.patient_profile_data.first_name }}! </strong>
               </p>
               <p>
                 It seems you previously had appointment with us. Feel free to check your previous appointments from here 
                 <div class="previous-appointment-link-div">
                   <a href="{% url 'patient:appointment-history' %}" class="underline-link">Prevoius Appointments</a>
                 </div>
                  
               </p>
               {% else %}
                <p>
                 It looks like you are a new patient. Please fill in the details below to book an appointment. 
                </p>
                 <p>
                   It is important to us that you provide accurate information.
                 </p>
               {% endif %}
            </p>
            
       </div>
  
        </div>
        
      </div>
        <form id="" role="form" method="post">
            {% csrf_token %} 
            <!-- SECTION TITLE -->
            <!-- <div class="section-title wow fadeInUp" data-wow-delay="0.4s">
                 <h2>Enter your details</h2>
                 {% if response_messages.existing_patient %}
                 <p class="text-bold welcome-title-p">
                    Welcome back <strong>{{ response_messages.patient_profile_data.first_name }}! </strong>
                    </p>
                    <p>
                      It seems you previously had appointment with us. Feel free to check your previous appointments from here 
                      <div class="previous-appointment-link-div">
                        <a href="{% url 'patient:appointment-history' %}" class="underline-link">Prevoius Appointments</a>
                      </div>
                       
                    </p>
                    {% else %}
                     <p>
                      It looks like you are a new patient. Please fill in the details below to book an appointment. 
                     </p>
                      <p>
                        It is important to us that you provide accurate information.
                      </p>
                    {% endif %}
                 </p>
                 
            </div> -->
            <hr>
            <div class="wow fadeInUp" data-wow-delay="0.8s">
              <p>
                Please check your details before submitting and make sure you have filled all the required fields. Update your details if you wish.
              </p>
                 <div class="row flex">
                    <div class="col-md-4 col-sm-4">
                        <div class="">
                          <label for="">First Name</label>
                          {% render_field patient_profile_form.first_name %}
                        </div>
                        </div>
                        <div class="col-md-4 col-sm-4">
                          <div class="">
                            <label for="">Middle Name</label>
                            {% render_field patient_profile_form.middle_name %}
                          </div>
                          </div>
                          <div class="col-md-4 col-sm-4">
                            <div class="">
                              <label for="">Last Name</label>
                              {% render_field patient_profile_form.last_name %}
                            </div>
                            </div>
  
                        <!-- {{ patient_profile_form }}
                        <hr> -->
                        <!-- <p>Please tell primary reason why you want to consult the doctor </p>
                        {{ patient_message_form }} -->
                   </div>   
                   <div class="row flex">
                    <div class="col-md-6 col-sm-6">
                        <div class="">
                          <label for="">Age</label>
                          {% render_field patient_profile_form.age %}
                        </div>
                        </div>
                        <div class="col-md-6 col-sm-6">
                          <div class="">
                            <label for="">Email</label>
                            {% render_field patient_profile_form.email %}
                          </div>
                          </div>
  
                        <!-- {{ patient_profile_form }}
                        <hr> -->
                        <!-- <p>Please tell primary reason why you want to consult the doctor </p>
                        {{ patient_message_form }} -->
                   </div>   
                   <div class="row flex">
                    <div class="col-md-6 col-sm-6">
                        <div class="">
                          <label for="">Address</label>
                          {% render_field patient_profile_form.address %}
                        </div>
                        </div>
                        <div class="col-md-6 col-sm-6">
                          <div class="">
                            <label for="">Gender</label>
                            {% render_field patient_profile_form.gender %}
                          </div>
                          </div>
                        
  
                        <!-- {{ patient_profile_form }}
                        <hr> -->
                        <!-- <p>Please tell primary reason why you want to consult the doctor </p>
                        {{ patient_message_form }} -->
                   </div>   
                    <hr> 
                    
                      <h5>Please tell primary reason why you want to consult the doctor </h5>
                      {% render_field patient_message_form.message class="form-control message-textarea" %}
                     
                      <div class="row flex mt-8">
                        <div class="col-md-6 col-sm-6 input-div">
                            <input class="button" type="submit" value="Book appointment" />
                        </div>
                    </div>
                 </div>           
                
            </div>
        </form>
    </div>
</div>
{% endblock %}